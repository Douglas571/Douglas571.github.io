<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Douglas - Introducción al Uso de Expresiones Regulares en Javascript</title>
    <meta name="description" content=""/>
    <!--  Essential META Tags -->

    <meta property="og:title" content="Introducción al Uso de Expresiones Regulares en Javascript">
    <meta property="og:description" content="Las expresiones regulares, regexp o regex del inglés (Regular Expressions), son un método usado para describir un patrón de caracteres, que luego serán...">
    <meta property="og:image" content="/img/regexp.jpg">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary_large_image">

    <!--  Non-Essential, But Recommended -->

    <meta property="og:site_name" content="Douglas JC">
    <meta name="twitter:image:alt" content="regular expressions in a screen">


    <!--  Non-Essential, But Required for Analytics
    <meta property="fb:app_id" content="your_app_id" />
    <meta name="twitter:site" content="@website-username">
    -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8L3HGEZFW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-N8L3HGEZFW');
    </script>


	<link rel="stylesheet" type="text/css" href="/css/styles.css">
</head>
<body>
    <div class="warning">
        <img width="32px" height="32px" src="/img/war-sign.svg">
        <h4>
            !Este sitio está en construcción!... pero igual puedes pasar y ver :D
        </h4>
    </div>
        
    <header id="header">
        <h1 class="logo">Douglas JC</h1>

        <nav id="nav-menu">
            <ul>
                
                    <li>
                        
                            <a href="/">Inicio</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/projects/">Proyectos</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/about/">Sobre mí</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/contact/">Contacto</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/blog/">Blog</a>
                        
                    </li>
                
            </ul>
        </nav>
    </header>

    <main>
        
<div class="container post">
    <h1>Introducción al Uso de Expresiones Regulares en Javascript</h1>
<h2>Contenido</h2>
<ol>
<li>
<p><a href="#expresiones-regulares">Expresiones Regulares</a></p>
</li>
<li>
<p><a href="#usos">Usos</a></p>
</li>
<li>
<p><a href="#declaracion">Declaración</a></p>
</li>
<li>
<p><a href="#validando-datos">Validando Datos</a></p>
</li>
<li>
<p><a href="#extrayendo-sub-cadenas">Extrayendo Sub-cadenas</a></p>
</li>
<li>
<p><a href="#modificando-cadenas">Modificando Cadenas</a></p>
</li>
<li>
<p><a href="#resumen">Resumen</a></p>
</li>
<li>
<p><a href="#referencias">Referencias</a></p>
</li>
</ol>
<h2 id="expresiones-regulares">Expresiones Regulares</h2>
<p>Las expresiones regulares, regexp o regex del inglés (Regular Expressions), son un método usado para describir un patrón de caracteres, que luego serán identificados en una cadena de texto.</p>
<p>Conforman un lenguaje propio, agnóstico a cualquier lenguaje de programación, y algunos editores de texto lo incorporan en sus herramientas de búsqueda. Por ejemplo: Sublime Text, Visual Studio, el comando grep, entre otros.</p>
<h2 id="usos">Usos</h2>
<p>Las expresiones regulares son al programador, lo que una motosierra a un leñador. Si dominas su lenguaje, este te permite extraer y modificar cadenas de texto de una forma rápida y limpia, eliminando incansables bucles, condicionales y llamadas a los métodos split y join.</p>
<p>De igual forma, en Javascript las expresiones regulares son ampliamente utilizadas para el procesamiento y validación de datos: Emails, nombres de usuario, contraseñas, direcciones, etc.</p>
<h2 id="declaracion">Declarión</h2>
<p>Las expresiones regulares en javascript son objetos del tipo RegExp, y pueden ser declaradas mediante literales encerradas entre barras /…/ o por el constructor.</p>
<pre><code class="language-javascript">//Con literales de RegExp
const withLiteral = /abc/ig

//Con constructor de RegExp
const y = 'y'
const withConstructor = RegExp('x'+ y +'z', 'ig')
</code></pre>
<p>Las literales pueden ser declaradas con un bandera, que modifica el comportamiento, la i establece que ha de ignorarse si los caracteres estan es mayusculas o minusculas; la g o bandera global, establece que se han de buscar emparejamientos en toda la cadena.</p>
<h3>Escapando Caracteres</h3>
<p>Algunos caracteres, poseen un significado especial en expresiones regulares, por ejemplo: el signo + es un cuantificador, si queremos buscar una cadena que contenga este signo es necesario escaparla usando la barra invertida /+/.</p>
<p>Utilizando literales no hay mayor inconveniente, sin embargo, el constructor de RegExp, recibe como parámetro una cadena de texto, y en este caso, la barra invertida ya tiene un significado especial de por sí, por lo tanto, hay que escaparlo, el ejemplo anterior quedaría así: “\+”.</p>
<p>De esta forma, vemos que las literales nos ahorran hacer un doble escapado, a costa de ser estáticas, el método del constructor nos permite generar expresiones regulares de forma dinámica.</p>
<h3>Referencias</h3>
<p>En el sitio web de microsoft para developers puedes revisar una <a href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference">pequeña referencia</a> sobre los caracteres expeciales de las expresiones regulares.</p>
<p>Si necesitas algo más detallado, tambien puedes revisar la documentación en Mozila Developer Network(MDN) sobre <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">expresiones regulares</a>.</p>
<h2 id="validando-datos">Validando Datos</h2>
<p>La clase RegExp posee el método <strong><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test">test</a></strong> al cual se le pasa por parámetro una cadena de texto, y comprueba si se ajusta a la expresión regular utilizada.</p>
<pre><code class="language-javascript">const phone = '0412-051-34-32'
const phonePattern = /\d{4}-\d{3}-\d{2}-\d{2}/

if(phonePattern.test(phone)) {
    console.log(`${phone} is a valid phone number`)

} else {
    console.log(`${phone} is an invalid phone number`)
}

//Expected output: 0412-051-34-32 is a valid phone
</code></pre>
<p>En el lenguaje de las expresiones regulares, el carácter \d sirve para identificar un digito, si se le une al cuantificador {n}, donde n es 4, establece que la expresión debe identificar 4 caracteres de tipo digito.</p>
<p>Por otro lado, la clase String proporciona el método <strong><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/search">search</a></strong> que devuelve el índice del primer emparejamiento en la cadena, o -1 en caso de no existir.</p>
<pre><code class="language-javascript">let index = phone.search(phonePattern)
if(index != -1) {
    console.log(`${phone} is a valid phone number in position: ${index}`)

} else {
    console.log(`${phone} is an invalid phone number`)
}
//Expected output: 0412-051-34-32 is a valid phone number in position: 0
</code></pre>
<h2 id="extrayendo-sub-cadenas">Extrayendo Subcadenas</h2>
<p>Como ya he mencionado, un uso bastante potente de las expresiones regulares es la capacidad de extraer sub-cadenas de texto. Se puede hacer de distintas formas, pero las más seguras son mediante los métodos <strong><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/match">match</a></strong> y <strong><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/match">matchAll</a></strong> de la clase String.</p>
<h3>Usando .match()</h3>
<p>El uso de la bandera g en la expresión regular cambia el comportamiento de match, al estar ausente, devuelve una arreglo el cual actua como una descripción detallada del emparejamiento encontrado: en la primera posicicón, el emparejamiento completo, seguido de los grupos de captura, e incluye un objeto index que informa de la posición en la cadena de texto.</p>
<p><em>Grupos de Captura: Son definidos mediantes paréntesis en las expresiones regulares, se comportan como sub-expresiones y es posible acceder a ellos individualmente.</em></p>
<pre><code class="language-javascript">let screenSize = &quot;el tamaño de la pantalla es 780x1024&quot;
let screenSizePattern = /(\d{3,})x(\d{3,})/i

let detallesDelEmparejamiento = screenSize.match(screenSizePattern)
let [emparejamientoCompleto, alto, ancho] = detallesDelEmparejamiento

console.log('el ancho es: ' + ancho + 'px\nel alto es: ' + alto + 'px')
</code></pre>
<p>Cuando la bandera g está presente, el metodo <strong>match</strong> retorna un array con todos los emparejamientos encontrados, ignorando los grupos de captura.</p>
<pre><code class="language-javascript">let multipleScreens = '780x1024\n3000x2000\n640x860\n1024x2000\n'
let screenSizePatternGlobal = /(\d{3,})x(\d{3,})/ig

console.log(multipleScreens.match(screenSizePatternGlobal))
//expected output: [&quot;780x1024&quot;, &quot;3000x2000&quot;, &quot;640x860&quot;, &quot;1024x2000&quot;]
</code></pre>
<h3>Usando .matchAll()</h3>
<p>A veces deseamos un resultado más detallado, y para ello recurrimos a matchAll, el cual retorna un <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators">iterador</a></strong> con todos los emparejamientos de la cadena; cada elemento del iterador es un objeto similar al retornado por match sin la bandera global.</p>
<p>Debido a que retorna un iterado, es muy práctico de utilizar con el bucle for-of, Array spread y Array.from().</p>
<pre><code class="language-javascript">//Con for-of
for (const match of multipleScreens.matchAll(screenSizePatternGlobal)) {
    console.log(`match: ${match[0]}, 
                ancho: ${match[1]}, 
                alto: ${match[2]}, 
                start: ${match.index}, 
                end: ${match.index + match[0].length}`)
}

//Usando Array Spread
let matches = [...multipleScreens.matchAll(screenSizePatternGlobal)]

//Creando un array
let arrayOfMatches = Array.from(multipleScreens.matchAll(screenSizePatternGlobal), m =&gt; m[0])
</code></pre>
<p>Cabe señalar que matchAll acepta únicamente expresiones regulares con la bandera global, de lo contrario lanza una excepción.</p>
<p>Estos dos métodos están implementados alrededor del método <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec">exec</a></strong> de la clase RegExp, el cual es un poco confuso y es preferible evitarlo, en pro de match y matchAll.</p>
<h2 id="modificando-cadenas">Modificando Cadenas</h2>
<p>Otro uso bastante potente para las expresiones regulares es la modificación de textos con <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace">replace</a></strong>; el lenguaje de las expresiones regulares establece una sintaxis en estos casos.</p>
<p>Podemos establecer cómo debe de quedar la porción de cadena emparejada, pasando como segundo parámetro una cadena de texto, y mediante el signo $ podemos formatear la nueva cadena: $&amp; hará referencia a la cadena completa y con $1, ..., $9 accederemos a los grupos de captura definidos en la expresión regular.</p>
<pre><code class="language-javascript">let names = &quot;Liskov, Barbara\nMcCarthy, John\nWadler, Philip&quot;.replace(/(\w+), (\w+)/g, &quot;$&amp; -&gt; $2 $1&quot;)

console.log(names);
// Expected output:
// Liskov, Barbara -&gt; Barbara Liskov
// McCarthy, John -&gt; John McCarthy
// Wadler, Philip -&gt; Philip Wadler
</code></pre>
<p>Así mismo, también es posible pasar una función como segundo parámetro de replace, esta ha de recibir como primer parámetro, el match completo, seguido de los n grupos de captura que hayamos especificado en nuestra expresión regular.</p>
<p>La función pasada a replace, será llamada con cada uno de los emparejamientos, y se debe retornar algún valor que será colocado en su lugar.</p>
<pre><code class="language-javascript">let title = 'Artist1 - Some Song Title (ft. Artist2, Artist3)'
let regexp = /(\w+) - (.+) \(ft\. (.+)\)/i

title = title.replace(regexp, (_, artist, song, fts) =&gt; `${song} by ${artist} &amp; ${fts}`)

console.log(title)
//Expected output: Some Song Title by Artist1 &amp; Artist2, Artist3
</code></pre>
<h2 id="resumen">Resumen</h2>
<p>En este artículo hemos descubierto qué son las expresiones regulares, sus usos, así como las formas de emplearlas en el lenguaje javascript: Validación de datos, extracción de emparejamientos, así como el formateo de cadenas.</p>
<h2 id="referencias">Referencias</h2>
<ul>
<li>
<p><a href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference">MSDN - Regular Expression Language - Quick Reference</a></p>
</li>
<li>
<p><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Regular_Expressions">MDN - Guía de Expresiones Regulares</a></p>
</li>
<li>
<p><a href="https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular">Wikipedia - Expresiones Regulares</a></p>
</li>
<li>
<p><a href="https://eloquentjavascript.net/09_regexp.html">Eloquent Javascript - Regular Expressions</a></p>
</li>
</ul>

</div>
    </main>

    <footer id="footer">
        <p class="t-center">&copy; 2021</p>
    </footer>
</body>
</html>