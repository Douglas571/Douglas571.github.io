<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Bree Serif|Roboto Slab"><link rel=stylesheet type=text/css href=https://douglas571.github.io/styles.660e8de60a6cd1b21557918b07212855017f545180efbe5a7bc10ac36123a952.css><link rel=stylesheet type=text/css href=https://douglas571.github.io/blog.c6b208d5a3f96d12b576aa62cb8a8b316542ec767bb926e3aeb576f1c352eaed.css><link rel=stylesheet type=text/css href=https://douglas571.github.io/syntax.7170736d961c3e65d8f3cf42f304eca4dfb9a9c567ae0136acf1354a427d02ec.css><title>Introducción al Uso de Expresiones Regulares en Javascript - Douglas Socorro</title></head><body><main class=page><div class=mobil-navbar><div class=close-button><img src=/x2.svg></div><div class=content><a class=logo href=/>Douglas Socorro</a><ul class=links><li><a href=/blog>Blog</a></li><li><a href=/contact>Contact</a></li><li><a href=/about>About</a></li></ul></div></div><div class=navbar><a class=logo href=/>Douglas Socorro</a><ul class=links><li><a href=/blog>Blog</a></li><li><a href=/contact>Contact</a></li><li><a href=/about>About</a></li></ul><div class=open-mobil-navbar><img src=/menu.svg></div></div><div class=blog-post><h1 class=title>Introducción al Uso de Expresiones Regulares en Javascript</h1><h2 id=contenido>Contenido</h2><ol><li><p><a href=#expresiones-regulares>Expresiones Regulares</a></p></li><li><p><a href=#usos>Usos</a></p></li><li><p><a href=#declaracion>Declaración</a></p></li><li><p><a href=#validando-datos>Validando Datos</a></p></li><li><p><a href=#extrayendo-sub-cadenas>Extrayendo Sub-cadenas</a></p></li><li><p><a href=#modificando-cadenas>Modificando Cadenas</a></p></li><li><p><a href=#resumen>Resumen</a></p></li><li><p><a href=#referencias>Referencias</a></p></li></ol><h2 id=expresiones-regulares>Expresiones Regulares</h2><p>Las expresiones regulares, regexp o regex del inglés (Regular Expressions), son un método usado para describir un patrón de caracteres, que luego serán identificados en una cadena de texto.</p><p>Conforman un lenguaje propio, agnóstico a cualquier lenguaje de programación, y algunos editores de texto lo incorporan en sus herramientas de búsqueda. Por ejemplo: Sublime Text, Visual Studio, el comando grep, entre otros.</p><h2 id=usos>Usos</h2><p>Las expresiones regulares son al programador, lo que una motosierra a un leñador. Si dominas su lenguaje, este te permite extraer y modificar cadenas de texto de una forma rápida y limpia, eliminando incansables bucles, condicionales y llamadas a los métodos split y join.</p><p>De igual forma, en Javascript las expresiones regulares son ampliamente utilizadas para el procesamiento y validación de datos: Emails, nombres de usuario, contraseñas, direcciones, etc.</p><h2 id=declarión>Declarión</h2><p>Las expresiones regulares en javascript son objetos del tipo RegExp, y pueden ser declaradas mediante literales encerradas entre barras /…/ o por el constructor.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>//Con literales de RegExp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>withLiteral</span> <span class=o>=</span> <span class=sr>/abc/ig</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Con constructor de RegExp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>y</span> <span class=o>=</span> <span class=s1>&#39;y&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>withConstructor</span> <span class=o>=</span> <span class=nb>RegExp</span><span class=p>(</span><span class=s1>&#39;x&#39;</span><span class=o>+</span> <span class=nx>y</span> <span class=o>+</span><span class=s1>&#39;z&#39;</span><span class=p>,</span> <span class=s1>&#39;ig&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>Las literales pueden ser declaradas con un bandera, que modifica el comportamiento, la i establece que ha de ignorarse si los caracteres estan es mayusculas o minusculas; la g o bandera global, establece que se han de buscar emparejamientos en toda la cadena.</p><h3 id=escapando-caracteres>Escapando Caracteres</h3><p>Algunos caracteres, poseen un significado especial en expresiones regulares, por ejemplo: el signo + es un cuantificador, si queremos buscar una cadena que contenga este signo es necesario escaparla usando la barra invertida /+/.</p><p>Utilizando literales no hay mayor inconveniente, sin embargo, el constructor de RegExp, recibe como parámetro una cadena de texto, y en este caso, la barra invertida ya tiene un significado especial de por sí, por lo tanto, hay que escaparlo, el ejemplo anterior quedaría así: “\+”.</p><p>De esta forma, vemos que las literales nos ahorran hacer un doble escapado, a costa de ser estáticas, el método del constructor nos permite generar expresiones regulares de forma dinámica.</p><h3 id=referencias>Referencias</h3><p>En el sitio web de microsoft para developers puedes revisar una <a href=https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference>pequeña referencia</a> sobre los caracteres expeciales de las expresiones regulares.</p><p>Si necesitas algo más detallado, tambien puedes revisar la documentación en Mozila Developer Network(MDN) sobre <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions>expresiones regulares</a>.</p><p>La clase RegExp posee el método <strong><a href=https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test>test</a></strong> al cual se le pasa por parámetro una cadena de texto, y comprueba si se ajusta a la expresión regular utilizada.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>phone</span> <span class=o>=</span> <span class=s1>&#39;0412-051-34-32&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>phonePattern</span> <span class=o>=</span> <span class=sr>/\d{4}-\d{3}-\d{2}-\d{2}/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nx>phonePattern</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>phone</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>phone</span><span class=si>}</span><span class=sb> is a valid phone number`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>phone</span><span class=si>}</span><span class=sb> is an invalid phone number`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Expected output: 0412-051-34-32 is a valid phone
</span></span></span></code></pre></div><p>En el lenguaje de las expresiones regulares, el carácter \d sirve para identificar un digito, si se le une al cuantificador {n}, donde n es 4, establece que la expresión debe identificar 4 caracteres de tipo digito.</p><p>Por otro lado, la clase String proporciona el método <strong><a href=https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/search>search</a></strong> que devuelve el índice del primer emparejamiento en la cadena, o -1 en caso de no existir.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>phone</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=nx>phonePattern</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nx>index</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>phone</span><span class=si>}</span><span class=sb> is a valid phone number in position: </span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>phone</span><span class=si>}</span><span class=sb> is an invalid phone number`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//Expected output: 0412-051-34-32 is a valid phone number in position: 0
</span></span></span></code></pre></div><h2 id=extrayendo-subcadenas>Extrayendo Subcadenas</h2><p>Como ya he mencionado, un uso bastante potente de las expresiones regulares es la capacidad de extraer sub-cadenas de texto. Se puede hacer de distintas formas, pero las más seguras son mediante los métodos <strong><a href=https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/match>match</a></strong> y <strong><a href=https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String/match>matchAll</a></strong> de la clase String.</p><h3 id=usando-match>Usando .match()</h3><p>El uso de la bandera g en la expresión regular cambia el comportamiento de match, al estar ausente, devuelve una arreglo el cual actua como una descripción detallada del emparejamiento encontrado: en la primera posicicón, el emparejamiento completo, seguido de los grupos de captura, e incluye un objeto index que informa de la posición en la cadena de texto.</p><p><em>Grupos de Captura: Son definidos mediantes paréntesis en las expresiones regulares, se comportan como sub-expresiones y es posible acceder a ellos individualmente.</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>screenSize</span> <span class=o>=</span> <span class=s2>&#34;el tamaño de la pantalla es 780x1024&#34;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>screenSizePattern</span> <span class=o>=</span> <span class=sr>/(\d{3,})x(\d{3,})/i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>detallesDelEmparejamiento</span> <span class=o>=</span> <span class=nx>screenSize</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=nx>screenSizePattern</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=p>[</span><span class=nx>emparejamientoCompleto</span><span class=p>,</span> <span class=nx>alto</span><span class=p>,</span> <span class=nx>ancho</span><span class=p>]</span> <span class=o>=</span> <span class=nx>detallesDelEmparejamiento</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;el ancho es: &#39;</span> <span class=o>+</span> <span class=nx>ancho</span> <span class=o>+</span> <span class=s1>&#39;px\nel alto es: &#39;</span> <span class=o>+</span> <span class=nx>alto</span> <span class=o>+</span> <span class=s1>&#39;px&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>Cuando la bandera g está presente, el metodo <strong>match</strong> retorna un array con todos los emparejamientos encontrados, ignorando los grupos de captura.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>multipleScreens</span> <span class=o>=</span> <span class=s1>&#39;780x1024\n3000x2000\n640x860\n1024x2000\n&#39;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>screenSizePatternGlobal</span> <span class=o>=</span> <span class=sr>/(\d{3,})x(\d{3,})/ig</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>multipleScreens</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=nx>screenSizePatternGlobal</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>//expected output: [&#34;780x1024&#34;, &#34;3000x2000&#34;, &#34;640x860&#34;, &#34;1024x2000&#34;]
</span></span></span></code></pre></div><h3 id=usando-matchall>Usando .matchAll()</h3><p>A veces deseamos un resultado más detallado, y para ello recurrimos a matchAll, el cual retorna un <strong><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators>iterador</a></strong> con todos los emparejamientos de la cadena; cada elemento del iterador es un objeto similar al retornado por match sin la bandera global.</p><p>Debido a que retorna un iterado, es muy práctico de utilizar con el bucle for-of, Array spread y Array.from().</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>//Con for-of
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>match</span> <span class=k>of</span> <span class=nx>multipleScreens</span><span class=p>.</span><span class=nx>matchAll</span><span class=p>(</span><span class=nx>screenSizePatternGlobal</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`match: </span><span class=si>${</span><span class=nx>match</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=sb>, 
</span></span></span><span class=line><span class=cl><span class=sb>                ancho: </span><span class=si>${</span><span class=nx>match</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=si>}</span><span class=sb>, 
</span></span></span><span class=line><span class=cl><span class=sb>                alto: </span><span class=si>${</span><span class=nx>match</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=si>}</span><span class=sb>, 
</span></span></span><span class=line><span class=cl><span class=sb>                start: </span><span class=si>${</span><span class=nx>match</span><span class=p>.</span><span class=nx>index</span><span class=si>}</span><span class=sb>, 
</span></span></span><span class=line><span class=cl><span class=sb>                end: </span><span class=si>${</span><span class=nx>match</span><span class=p>.</span><span class=nx>index</span> <span class=o>+</span> <span class=nx>match</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>length</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Usando Array Spread
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>matches</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>multipleScreens</span><span class=p>.</span><span class=nx>matchAll</span><span class=p>(</span><span class=nx>screenSizePatternGlobal</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Creando un array
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>arrayOfMatches</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>multipleScreens</span><span class=p>.</span><span class=nx>matchAll</span><span class=p>(</span><span class=nx>screenSizePatternGlobal</span><span class=p>),</span> <span class=nx>m</span> <span class=p>=&gt;</span> <span class=nx>m</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span></code></pre></div><p>Cabe señalar que matchAll acepta únicamente expresiones regulares con la bandera global, de lo contrario lanza una excepción.</p><p>Estos dos métodos están implementados alrededor del método <strong><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec>exec</a></strong> de la clase RegExp, el cual es un poco confuso y es preferible evitarlo, en pro de match y matchAll.</p><h2 id=modificando-cadenas>Modificando Cadenas</h2><p>Otro uso bastante potente para las expresiones regulares es la modificación de textos con <strong><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace>replace</a></strong>; el lenguaje de las expresiones regulares establece una sintaxis en estos casos.</p><p>Podemos establecer cómo debe de quedar la porción de cadena emparejada, pasando como segundo parámetro una cadena de texto, y mediante el signo $ podemos formatear la nueva cadena: $& hará referencia a la cadena completa y con $1, &mldr;, $9 accederemos a los grupos de captura definidos en la expresión regular.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>names</span> <span class=o>=</span> <span class=s2>&#34;Liskov, Barbara\nMcCarthy, John\nWadler, Philip&#34;</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/(\w+), (\w+)/g</span><span class=p>,</span> <span class=s2>&#34;$&amp; -&gt; $2 $1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>names</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// Expected output:
</span></span></span><span class=line><span class=cl><span class=c1>// Liskov, Barbara -&gt; Barbara Liskov
</span></span></span><span class=line><span class=cl><span class=c1>// McCarthy, John -&gt; John McCarthy
</span></span></span><span class=line><span class=cl><span class=c1>// Wadler, Philip -&gt; Philip Wadler
</span></span></span></code></pre></div><p>Así mismo, también es posible pasar una función como segundo parámetro de replace, esta ha de recibir como primer parámetro, el match completo, seguido de los n grupos de captura que hayamos especificado en nuestra expresión regular.</p><p>La función pasada a replace, será llamada con cada uno de los emparejamientos, y se debe retornar algún valor que será colocado en su lugar.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>title</span> <span class=o>=</span> <span class=s1>&#39;Artist1 - Some Song Title (ft. Artist2, Artist3)&#39;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>regexp</span> <span class=o>=</span> <span class=sr>/(\w+) - (.+) \(ft\. (.+)\)/i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>title</span> <span class=o>=</span> <span class=nx>title</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=nx>regexp</span><span class=p>,</span> <span class=p>(</span><span class=nx>_</span><span class=p>,</span> <span class=nx>artist</span><span class=p>,</span> <span class=nx>song</span><span class=p>,</span> <span class=nx>fts</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=sb>`</span><span class=si>${</span><span class=nx>song</span><span class=si>}</span><span class=sb> by </span><span class=si>${</span><span class=nx>artist</span><span class=si>}</span><span class=sb> &amp; </span><span class=si>${</span><span class=nx>fts</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>//Expected output: Some Song Title by Artist1 &amp; Artist2, Artist3
</span></span></span></code></pre></div><h2 id=resumen>Resumen</h2><p>En este artículo hemos descubierto qué son las expresiones regulares, sus usos, así como las formas de emplearlas en el lenguaje javascript: Validación de datos, extracción de emparejamientos, así como el formateo de cadenas.</p><ul><li><p><a href=https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference>MSDN - Regular Expression Language - Quick Reference</a></p></li><li><p><a href=https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Regular_Expressions>MDN - Guía de Expresiones Regulares</a></p></li><li><p><a href=https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular>Wikipedia - Expresiones Regulares</a></p></li><li><p><a href=https://eloquentjavascript.net/09_regexp.html>Eloquent Javascript - Regular Expressions</a></p></li></ul></div></main></body><script type=text/javascript src=https://douglas571.github.io/scripts.6eb6377256a17f8218bfcb8f7b40914adbc4667b219fd1738b9f3d76ad673fc3.js></script></html>